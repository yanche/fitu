
var moment = require('moment');
var timezone = require('moment-timezone');

//in seconds, to 00:00:00, return 0 if current time is between 00:00:00 and 1:00:00
var getFileMaxAge = function () {
    var fileMaxAge = 0, now = moment().tz('Asia/Shanghai'); //China local time;
    if (now.hour() != 0) { //not in 00:00 - 00:59
        var endOfNow = now.clone().hour(24).minute(0).second(0); //end of today, 00:00:00 of next day
        fileMaxAge = (endOfNow - now) / 1000; //in seconds
    }
};

exports.getFileMaxAge = getFileMaxAge;