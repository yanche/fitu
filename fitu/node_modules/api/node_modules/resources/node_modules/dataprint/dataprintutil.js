
var mapFnByCreatedOn = function () {
    //convert from utc to china time
    this.createdOn.setUTCHours(this.createdOn.getUTCHours() + 8);
    var key = this.createdOn.getUTCFullYear() + '/' + (this.createdOn.getUTCMonth() + 1) + '/' + this.createdOn.getUTCDate();
    emit(key, { count: 1 });
};

var reduceFnByCreatedOn = function (key, emits) {
    return { count: emits.reduce(function (init, val) { return init + val.count; }, 0) };
};

exports.mapFnByCreatedOn = mapFnByCreatedOn;
exports.reduceFnByCreatedOn = reduceFnByCreatedOn;