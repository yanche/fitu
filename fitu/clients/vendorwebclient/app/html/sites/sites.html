<div class="col-xs-12" style="margin-bottom: 100px;">
    <h3 ng-bind="lang.SITE_TITLE" class="col-xs-12 nopadding" style="margin-bottom:30px;"></h3>
    <div class="col-xs-2" style="max-height: 1500px;overflow-y:auto;">
        <div ng-repeat="site in sites" ng-click="initSiteEdit(site)" class="clickable" style="margin-bottom:30px;">
            <div class="text-center text-overflow-hidden" ng-bind="site.raw.name"></div>
            <img style="width:100%;max-width:100%;" ng-src="{{site.raw.picUrl}}" />
        </div>
        <div ng-click="initSiteEdit(addedSite)" style="height:80px;border:1px dotted black;border-radius:10px;line-height:80px;" class="text-center flatbtn-o marginT15px">添加场馆</div>
    </div>
    <div class="col-xs-10 col-sm-7 col-md-5" ng-show="editingSite">
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px" for="new_site_name" ng-bind="lang.SITE_LABEL_NAME"></label>
            <div ng-class="{'has-error': !editingSite.model.nameProp.validate()}">
                <input type="text" class="form-control" id="new_site_name" ng-model="editingSite.model.nameProp.val" />
            </div>
        </div>
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px" for="new_site_intro" ng-bind="lang.SITE_LABEL_INTRO"></label>
            <div ng-class="{'has-error': !editingSite.model.introProp.validate()}">
                <textarea class="form-control" id="new_site_intro" ng-model="editingSite.model.introProp.val" style="max-width:100%;"></textarea>
            </div>
        </div>
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px" for="new_site_trans_subway" ng-bind="lang.SITE_LABEL_TRANS + ' - ' + lang.SITE_LABEL_TRANS_SUBWAY"></label>
            <div ng-class="{'has-error': !editingSite.model.transSubwayProp.validate()}">
                <input type="text" class="form-control" id="new_site_trans_subway" ng-model="editingSite.model.transSubwayProp.val" />
            </div>
        </div>
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px" for="new_site_trans_bus" ng-bind="lang.SITE_LABEL_TRANS + ' - ' + lang.SITE_LABEL_TRANS_BUS"></label>
            <div ng-class="{'has-error': !editingSite.model.transBusProp.validate()}">
                <input type="text" class="form-control" id="new_site_trans_bus" ng-model="editingSite.model.transBusProp.val" />
            </div>
        </div>
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px" for="new_site_contact" ng-bind="'联系方式'"></label>
            <div ng-class="{'has-error': !editingSite.model.contactProp.validate(true)}">
                <input type="text" class="form-control" id="new_site_contact" ng-model="editingSite.model.contactProp.val" />
            </div>
        </div>
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px" ng-bind="'开放时间'"></label>
            <div class="col-xs-12 paddingLR0px">
                <label class="col-xs-12 paddingLR0px" ng-bind="'开始'"></label>
                <div class="col-xs-12 paddingLR0px">
                    <div class="col-xs-4 paddingLR0px">
                        <select class="form-control" ng-options="h for h in const.hour24" ng-model="editingSite.model.openStartHourProp.val"></select>
                    </div>
                    <div class="col-xs-2 paddingLR0px text-bold text-center" style="margin-top:7px;">时</div>
                    <div class="col-xs-4 paddingLR0px">
                        <select class="form-control" ng-options="m for m in const.minutesQuarter" ng-model="editingSite.model.openStartMinProp.val"></select>
                    </div>
                    <div class="col-xs-2 paddingLR0px text-bold text-center" style="margin-top:7px;">分</div>
                </div>
                <label class="col-xs-12 paddingLR0px" ng-bind="'结束'"></label>
                <div class="col-xs-12 paddingLR0px">
                    <div class="col-xs-4 paddingLR0px">
                        <select class="form-control" ng-options="h for h in const.hour24" ng-model="editingSite.model.openEndHourProp.val"></select>
                    </div>
                    <div class="col-xs-2 paddingLR0px text-bold text-center" style="margin-top:7px;">时</div>
                    <div class="col-xs-4 paddingLR0px">
                        <select class="form-control" ng-options="m for m in const.minutesQuarter" ng-model="editingSite.model.openEndMinProp.val"></select>
                    </div>
                    <div class="col-xs-2 paddingLR0px text-bold text-center" style="margin-top:7px;">分</div>
                </div>
            </div>
        </div>
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px">
                <span ng-bind="lang.SITE_LABEL_PRICEMODE"></span>
                <i class="fa fa-plus clickable" ng-click="addPrice(editingSite.model)"></i>
            </label>
            <table>
                <thead>
                    <tr ng-show="editingSite.model.pricesProp.array.length > 1">
                        <th style="width:5%;"></th>
                        <th style="width:23%" ng-bind="lang.SITE_LABEL_PRICE_CHARGE"></th>
                        <th style="width:23%" ng-bind="lang.SITE_LABEL_PRICE_DURATION"></th>
                        <th style="width:23%" ng-bind="lang.SITE_LABEL_PRICE_FREQ"></th>
                        <th style="width:23%" ng-bind="lang.SITE_LABEL_PRICE_PEOPLE"></th>
                    </tr>
                    <tr ng-show="editingSite.model.pricesProp.array.length <= 1">
                        <th style="width:25%" ng-bind="lang.SITE_LABEL_PRICE_CHARGE"></th>
                        <th style="width:25%" ng-bind="lang.SITE_LABEL_PRICE_DURATION"></th>
                        <th style="width:25%" ng-bind="lang.SITE_LABEL_PRICE_FREQ"></th>
                        <th style="width:25%" ng-bind="lang.SITE_LABEL_PRICE_PEOPLE"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="price in editingSite.model.pricesProp.array" class="marginB10px">
                        <td ng-show="editingSite.model.pricesProp.array.length > 1" style="padding:5px 10px 5px 0px">
                            <i class="fa fa-times clickable remove" ng-click="removePrice(editingSite.model, $index)"></i>
                        </td>
                        <td style="padding:5px 10px 5px 0px">
                            <div ng-class="{'has-error': !price.amountProp.validate()}">
                                <input type="text" class="form-control" ng-model="price.amountProp.val" />
                            </div>
                        </td>
                        <td style="padding:5px 10px 5px 0px">
                            <div ng-class="{'has-error': !price.freqNumProp.validate()}">
                                <input type="text" class="form-control" ng-model="price.freqNumProp.val" />
                            </div>
                        </td>
                        <td style="padding:5px 10px 5px 0px">
                            <select class="form-control" ng-options="price.key as price.value for price in const.priceMeasure" ng-model="price.freqMeasureProp.val"></select>
                        </td>
                        <td style="padding:5px 0px">
                            <div ng-class="{'has-error': !price.peopleProp.validate()}">
                                <input type="text" class="form-control" ng-model="price.peopleProp.val" />
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px" ng-bind="lang.SITE_LABEL_TAGS"></label>
            <div class="paddingLR0px col-xs-12 tag-picker">
                <div class="tag-picker-item" ng-class="{selected: t.selected}" ng-repeat="t in editingSite.siteTagCandidates" ng-bind="t.value" ng-click="pickSiteTag(editingSite, t)"></div>
            </div>
        </div>
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px" for="new_site_addr" ng-bind="lang.SITE_LABEL_ADDRESS"></label>
            <div ng-class="{'has-error': !editingSite.model.addrProp.validate()}">
                <input type="text" class="form-control" id="new_site_addr" ng-model="editingSite.model.addrProp.val" />
            </div>
            <div>
                <span ng-bind="lang.GLOBAL_LABEL_LONGTITUDE"></span>
                <span ng-bind="editingSite.model.geoLngProp.val"></span>
                <span ng-bind="lang.GLOBAL_LABEL_LATITUDE"></span>
                <span ng-bind="editingSite.model.geoLatProp.val"></span>
            </div>
            <map class="form-group col-xs-12 paddingLR0px" style="height: 500px;" search-by-term="true" search-term="{{editingSite.model.addrProp.val}}" lat="editingSite.model.geoLatProp.val" lng="editingSite.model.geoLngProp.val"></map>
        </div>
        <div class="form-group col-xs-12 paddingLR0px">
            <label class="col-xs-12 paddingLR0px" for="new_site_pic" ng-bind="lang.SITE_LABEL_PIC"></label>
            <image-input image-bind="editingSite.model.picProp.val" image-height="120" image-width="160"></image-input>
            <img class="img-responsive" id="profile_logo" ng-src="{{editingSite.model.picProp.val}}" style="margin-top:5px;"></img>
        </div>
        <button ng-click="submitSiteEdit()" class="btn btn-success" ng-class="{disabled: adding || !editingSite.model.validate()}">
            <i class="fa fa-spinner fa-spin" ng-show="(!editingSite.raw && adding) || (editingSite.raw && editingSite.updating)"></i>
            <span ng-bind="lang.SITE_BTN_CREATE" ng-show="!editingSite.raw && !adding"></span>
            <span ng-bind="lang.SITE_BTN_CREATING" ng-show="!editingSite.raw && adding"></span>
            <span ng-bind="lang.SITE_BTN_UPDATE" ng-show="editingSite.raw && !editingSite.updating"></span>
            <span ng-bind="lang.SITE_BTN_UPDATING" ng-show="editingSite.raw && editingSite.updating"></span>
        </button>
        <button ng-click="resetEditingModel()" class="btn btn-default" ng-bind="lang.SITE_BTN_RESET"></button>
    </div>
</div>